<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <!-- 先引入jquery -->
    <script src="js/jquery.min.js"></script>
    <!-- 再引入xTools，注意要在js中修正xTools文件夹的地址 -->
    <script src="../xTools.js" fixing-address="../../xTools/" more-plugins="zxtreetable"></script>
    <title>Document</title>
</head>

<body>
    <div id="zxTreetable_demo"></div>
    <script>
    var zxTreeTable1;
    initZxTreetable();

    function initZxTreetable() {
        var deptData = [{ "deptId": "1", "parentId": null, "name": "tjrock" },
            { "deptId": "2", "parentId": "1", "name": "水果" },
            { "deptId": "2c3404494675429c96ce2a2e4c482ff5", "parentId": "2", "name": "榴莲部门" },
            { "deptId": "4", "parentId": "2", "name": "苹果部门" },
            { "deptId": "0bcbf13feeb940b48dff4c0f51c70cf5", "parentId": "4", "name": "小苹果" },
            { "deptId": "1aaca1b93f464f63bcd9ba90ab3161f6", "parentId": "4", "name": "大苹果" },
            { "deptId": "6", "parentId": "2", "name": "香蕉部门" },
            { "deptId": "7", "parentId": "2", "name": "橘子部门" },
            { "deptId": "3", "parentId": "1", "name": "主食" },
            { "deptId": "365d6c578d5f4a2581395fb9aa734366", "parentId": "3", "name": "面条" },
            { "deptId": "8", "parentId": "3", "name": "米饭部门" },
            { "deptId": "5", "parentId": "1", "name": "蔬菜" }
        ];
        var param = {
            // 将平级的arr转成树形结构
            data: deptData.convert_to_treedata({ before_idkey: "deptId" }),
            // id的key值
            idKey: "deptId",
            // child的key值
            childKey: "child",
            id: "zxTreetable_demo",
            title: [{
                name: "部门",
                key: "name",
                width: 50
            }, {
                name: '操作',
                crud: true, // 操作列的crud项必须置为true
                formatter: function(data) {
                    var sid = data.deptId;
                    return '<button class="orange" onclick=\'opendial_edit("' + (sid) + '")\'><i class="fa fa-pencil"></i>编辑</button>' +
                        '   <button class="green" onclick=\'opendial_look("' + (sid) + '")\'><i class="fa fa-eye"></i>查看</button>' +
                        '   <button class="red" onclick=\'fn_delete("' + (sid) + '")\'><i class="fa fa-trash-o"></i>删除</button>';
                }
            }],
            // 是否开启多选
            selection: true
        };
        zxTreeTable1 = new zxTreetable(param);
    }
    </script>
</body>

</html>