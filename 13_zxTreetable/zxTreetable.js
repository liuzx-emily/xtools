"use strict";function zxTreetable(a){this.data=a.data,this.idKey=a.idKey||"id",this.childKey=a.childKey||"child",this.container=$("#"+a.id),this.title=a.title,this.selection=a.selection||!1,this.init()}zxTreetable.prototype={get_selected:function get_selected(a){var b=[];return $.each(this.selected_info,function(c,d){b.push(d[a])}),b},init:function init(){0===$("style#zxTreetable_css").length&&this.add_style(),this.build_html(),this.bind_events()},build_html:function build_html(){var a=function(d,e,f,g){var h="";d[b.childKey]&&0<d[b.childKey].length&&(h="has_son"),c+="\n                    <tr  class=\""+h+"\" data_id=\""+d[b.idKey]+"\" data_parentid=\""+f+"\">\n                        "+(!0===b.selection?"\n                        <td class=\"x-checkbox\">\n                            <input type=\"checkbox\" name=\"x-input-checkbox\">\n                        </td>":""),$.each(b.title,function(i,j){if(j.crud)c+="<td crud>"+j.formatter(d)+"</td>";else{var k=d[j.key];if(k=j.formatter?j.formatter(k,e):b.fn_processNull(k,j.processNull),0===i){var l,m;"has_son"==h?(l="<i class=\"fa fa-chevron-down control_i\"></i>",m=35*g):(l="",m=35*g+20),c+="<td title=\""+k+"\" class=\"controltd\" style=\"padding-left:"+(15+m)+"px\">"+l+k+"</td>"}else c+="<td title=\""+k+"\">"+k+"</td>"}}),c+="</tr>",d[b.childKey]&&0<d[b.childKey].length&&d[b.childKey].forEach(function(i,j){a(i,j,d[b.idKey],g+1)})},b=this,c="\n        <table class=\"zxtreetable\">\n            <thead>\n                <tr>\n                    "+(!0===b.selection?"<th width=\"5%\" class=\"x-checkbox\"><input type=\"checkbox\" name=\"x-input-checkbox-all\"></th>":"");$.each(b.title,function(d,e){var f=e.width?"width=\""+e.width+"%\"":"",g=e.key?"keyName=\""+e.key+"\"":"";c+="<th "+f+" "+g+">"+e.name+"</th>"}),c+="\n                </tr>\n            </thead>\n            <tbody>",0===b.data.length?c+="<tr><td colspan=\"999\" style=\"font-weight:bold;\">\u6682\u65E0\u6570\u636E!</td></tr>":$.each(b.data,function(d,e){a(e,d,"",0)}),c+="</tbody>\n        </table>",b.container.html(c)},bind_events:function bind_events(){var a=this;setTimeout(function(){a.bind_event_collapse(),a.bind_event_select()},0)},add_style:function add_style(){$("body").append("\n        <!-- table\u7EC4\u4EF6\u7684css -->\n        <style id=\"zxTreetable_css\">\n        table.zxtreetable {\n            border-collapse: collapse;\n            width: 100%;\n            border: none;\n            box-shadow: #ccc 1px 1px 3px;\n        }\n        table.zxtreetable thead{\n            border:1px solid #3f627d;\n        }\n        table.zxtreetable tbody{\n            border:1px solid #ccc;\n            border-top:none;\n        }\n        /* \u63A7\u5236\u5C55\u5F00\u6536\u7F29\u7684td */\n        table.zxtreetable .controltd{\n            text-align:left!important;\n        }\n        /* \u63A7\u5236\u5C55\u5F00\u6536\u7F29\u7684icon */\n        table.zxtreetable .control_i{\n           padding: 5px;\n           cursor: pointer;\n           position: relative;\n           left: -4px;\n        }\n        /* \u9694\u884C\u53D8\u8272 */\n        table.zxtreetable tbody tr:nth-child(odd){\n            background: #fbfbfb;\n        }\n        table.zxtreetable tbody tr:nth-child(even){\n            background: #f5f5f5;\n        }\n        /* \u6BCF\u884C\u7684\u9F20\u6807\u60AC\u6D6E\u6548\u679C */\n        table.zxtreetable tbody tr:hover,table.zxtreetable tbody tr:nth-child(even):hover{\n            background:#eee;\n        }        \n        /*th*/\n        table.zxtreetable th{\n            background: #3f627d;\n            color: #fff;\n            text-align: center;\n            height: 30px;            \n            font-size: 13px;\n            padding: 0;\n        }\n        /*td*/\n        table.zxtreetable td{\n            color: #646464;\n            text-align: center;\n            height: 35px;\n            font-size: 14px;\n            padding: 0;\n            border: 1px solid #e5e5e5;\n        }\n        /*\u591A\u9009\u65F6\uFF0C\u8868\u5934\u7684\u5168\u9009\u6309\u94AE*/\n        table.zxtreetable thead input[name=\"x-input-checkbox-all\"]{\n            margin-top:5px;\n        }\n        /*\u589E\u5220\u6539\u6309\u94AE*/\n        table.zxtreetable td a,table.zxtreetable td input[type='button']{\n            display: inline-block;\n            background: #ff9600;\n            color: #fff;\n            padding: 3px 8px;\n            margin: 0 2px;\n            border-radius: 3px;\n            text-decoration: none;\n            font-size:12px;\n        }        \n        /*\u81EA\u52A8\u6362\u884C*/\n        table.zxtreetable th,table.zxtreetable td{\n            word-break:break-all;\n            word-wrap:break-word;\n        }\n        /*\u9009\u4E2D\u6548\u679C*/\n        table.zxtreetable .selected td {\n            background-color: #ffeee2;\n        }        \n        </style>")},bind_event_collapse:function bind_event_collapse(){function a(d){d.hide(),d.find("i.control_i").removeClass("fa-chevron-down").addClass("fa-chevron-right"),d.each(function(e,f){if($(f).hasClass("has_son")){var g=c.container.find("[data_parentid='"+$(f).attr("data_id")+"']");a(g)}})}var b=this.container.find("tbody i.control_i"),c=this;b.click(function(){var e=$(this).parents("tr").attr("data_id"),f=c.container.find("[data_parentid='"+e+"']"),g=$(this).hasClass("fa-chevron-down");return g?($(this).removeClass("fa-chevron-down"),$(this).addClass("fa-chevron-right"),a(f)):($(this).addClass("fa-chevron-down"),$(this).removeClass("fa-chevron-right"),f.show()),!1})},bind_event_select:function bind_event_select(){var a=this.container.find(".zxtreetable input[name=\"x-input-checkbox-all\"]"),b=this.container.find(".zxtreetable input[name=\"x-input-checkbox\"]");$.initCheckboxSelectAll(a,b)},fn_processNull:function fn_processNull(a,b){return(void 0===b||null===b)&&(b=""),(void 0===a||null===a||0==$.trim(a).length||"null"==a)&&(a=b),a},constructor:zxTreetable};